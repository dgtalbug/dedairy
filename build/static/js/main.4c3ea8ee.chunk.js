(this["webpackJsonpeleven-realtime-database-starter"]=this["webpackJsonpeleven-realtime-database-starter"]||[]).push([[0],{155:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),r=a(23),l=a.n(r),o=(a(62),a(12)),s=a.n(o),m=a(18),i=a(11),u=a(160),p=a(17),d=a(19),b=a(9),f=(a(64),a(65),a(66),{quality:.2,maxWidth:800,maxHeight:600,autoRotate:!0}),E=a(10),y=a.n(E),h=(a(67),a(156),a(161)),g=a(162),v=a(163),O=a(164),N=a(165),j=a(166),x=a(167),w=a(53),T=a(178),C=Object(n.createContext)(),S=a(56),k=a.n(S),A=function(){var e=Object(n.useContext)(C),t=e.state,a=e.dispatch,r=t.contactToUpdate,l=t.contactToUpdateKey,o=Object(d.f)(),p=Object(n.useState)(""),E=Object(i.a)(p,2),S=E[0],A=E[1],D=Object(n.useState)(""),_=Object(i.a)(D,2),U=_[0],I=_[1],L=Object(n.useState)(""),P=Object(i.a)(L,2),R=P[0],K=P[1],W=Object(n.useState)(!1),F=Object(i.a)(W,2),G=F[0],B=F[1],H=Object(n.useState)(null),z=Object(i.a)(H,2),J=z[0],M=z[1],q=Object(n.useState)(!1),V=Object(i.a)(q,2),Y=V[0],Q=V[1];Object(n.useState)("gs://dedairy-b4d2b.appspot.com/images/default-avatar.png");Object(n.useEffect)((function(){r&&(A(r.name),I(r.email),K(r.phoneNumber),M(r.picture),Q(!0))}),[r]);var Z=function(){var e=Object(m.a)(s.a.mark((function e(t){var a,n,c,r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.target.files[0],n={contentType:a.type},e.next=5,Object(w.readAndCompressImage)(a,f);case 5:return c=e.sent,e.next=8,y.a.storage().ref();case 8:r=e.sent,(l=r.child("images/"+a.name).put(c,n)).on(y.a.storage.TaskEvent.STATE_CHANGED,(function(e){B(!0);var t=e.bytesTransferred/e.totalBytes*100;switch(e.state){case y.a.storage.TaskState.PAUSED:B(!1);break;case y.a.storage.TaskState.RUNNING:B(!0)}100===t&&B(!1)}),(function(e){Object(b.b)("Something is wrong in state change",{type:"error"})}),(function(){l.snapshot.ref.getDownloadURL().then((function(e){M(e)})).catch((function(e){return console.error(e)}))})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0),Object(b.b)("Something went Wrong",{type:"error"});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{y.a.database().ref("contacts/"+Object(T.a)()).set({name:S,email:U,phoneNumber:R,picture:J,createdAt:Date.now(),updatedAt:Date.now()}),Object(b.b)("Contact Added ",{type:"success"})}catch(t){console.error(t),Object(b.b)("Cant Add Now",{type:"error"})}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{y.a.database().ref("contacts/"+l).set({name:S,email:U,phoneNumber:R,picture:J,updatedAt:Date.now()}),Object(b.b)("Contact Updated ",{type:"success"})}catch(t){console.error(t),Object(b.b)("Cant update Now",{type:"error"})}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(u.a,{fluid:!0,className:"mt-5"},c.a.createElement(h.a,null,c.a.createElement(g.a,{md:"6",className:"card offset-md-3"},c.a.createElement("h2",{className:"text-center text-secondary"},"Welcome to E-Dairy"),c.a.createElement(v.a,{onSubmit:function(e){e.preventDefault(),S&&U&&R?k.a.isMobilePhone(R)?(Y?X():$(),a({type:"CONTACT_TO_UPDATE",payload:null,key:null}),o.push("/")):Object(b.b)("Please Enter the valid Phone Number",{type:"warning"}):Object(b.b)("Please Fill in all Details",{type:"warning"})}},c.a.createElement("div",{className:"text-center"},c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"imagepicker",className:""},J?c.a.createElement("img",{src:J,alt:"",className:"profile"}):" "))),c.a.createElement(O.a,null,c.a.createElement(N.a,{type:"text",name:"name",id:"name",placeholder:"Name",value:S,onChange:function(e){return A(e.target.value)}})),c.a.createElement(O.a,null,c.a.createElement(N.a,{type:"email",name:"email",id:"email",value:U,onChange:function(e){return I(e.target.value)},placeholder:"Email"})),c.a.createElement(O.a,null,c.a.createElement(N.a,{type:"text",name:"number",id:"honenumber",value:R,onChange:function(e){return K(e.target.value)},placeholder:"Phone Number"})),G?c.a.createElement(j.a,{type:"grow",color:"primary"}):J?"":c.a.createElement(O.a,null,c.a.createElement(N.a,{type:"file",name:"image",id:"imagepicker",multiple:!1,onChange:function(e){return Z(e)}})),c.a.createElement(x.a,{type:"submit",color:"primary",block:!0,className:"text-uppercase"},Y?"Update Contact":"Add Contact")))))},D=a(168),_=a(169),U=a(35),I=function(e){var t=e.contact,a=e.contactKey,r=Object(n.useContext)(C).dispatch,l=Object(d.f)();return c.a.createElement(c.a.Fragment,null,c.a.createElement(h.a,null,c.a.createElement(g.a,{md:"1",className:"d-flex justify-content-center align-items-center"}),c.a.createElement(g.a,{md:"2",className:"d-flex justify-content-center align-items-center"},c.a.createElement("img",{src:t.picture?t.picture:"https://firebasestorage.googleapis.com/v0/b/dedairy-b4d2b.appspot.com/o/images%2Fdefault-avatar.png?alt=media&token=39879684-36ae-4531-af35-123443fb0e72",alt:"",className:"img-circle profile"})),c.a.createElement(g.a,{md:"6"},c.a.createElement("div",{className:"text-primary"},t.name),c.a.createElement("div",{className:"text-secondary"},t.phoneNumber),c.a.createElement("div",{className:"text-secondary"},t.email),c.a.createElement("div",{className:"text-info"},function(e){return new Date(e.updatedAt).toDateString()}(t))),c.a.createElement(g.a,{md:"2",className:"d-flex justify-content-center align-items-center"},c.a.createElement(U.a,{onClick:function(){y.a.database().ref("/contacts/".concat(a)).remove().then((function(){Object(b.b)("Contact Deleted",{type:"success"})})).catch((function(e){console.error(e),Object(b.b)("Cant Delete Now",{type:"error"})}))},color:"danger",className:"text-danger icon"}),c.a.createElement(U.b,{className:"icon text-info ml-2",onClick:function(){return r({type:"CONTACT_TO_UPDATE",payload:t,key:a}),void l.push("/contact/add")}})),c.a.createElement(g.a,{md:"1",className:"d-flex justify-content-center align-items-center"})))},L=function(e){var t=Object(n.useContext)(C).state,a=t.contacts,r=t.isLoading;return r?c.a.createElement("div",{className:"Center"},c.a.createElement(j.a,{color:"primary"}),c.a.createElement("div",{className:"text-primary"},"Loading...")):c.a.createElement(u.a,{className:"mt-4"},0!==a.length||r?c.a.createElement(D.a,null,Object.entries(a).map((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return c.a.createElement(_.a,{key:a},c.a.createElement(I,{contact:n,contactKey:a}))}))):c.a.createElement(A,null))},P=a(170),R=a(171),K=a(172),W=a(173),F=function(){return c.a.createElement(P.a,{color:"primary",light:!0},c.a.createElement(R.a,{tag:p.b,to:"/",className:"text-white"},"E-Dairy"),c.a.createElement(K.a,{className:"text-white float-right"},c.a.createElement(W.a,{tag:p.b,to:"/contact/search",className:"text-white p-2"},"Home"),c.a.createElement(W.a,{tag:p.b,to:"/contact/add",className:"text-white p-2"},"Add")))},G=function(){return c.a.createElement("footer",{className:"text-center pt-3 pb-2 mt-5 "},c.a.createElement("p",{className:"p-10"},"\xa9 E-Dairy 2020"))},B=a(174),H=a(175),z=a(176),J=a(177),M=a(36),q=function(){var e=Object(n.useContext)(C).state.contact;return c.a.createElement(u.a,null,c.a.createElement(h.a,{className:"mt-5 mb-5"},c.a.createElement(g.a,{md:"5",className:"offset-md-3"},c.a.createElement(B.a,{className:"pt-3 pb-5"},c.a.createElement(H.a,{className:"text-center "},c.a.createElement("img",{height:"150",width:"150",className:"cardImg profile border-danger",src:e.picture?e.picture:"https://firebasestorage.googleapis.com/v0/b/dedairy-b4d2b.appspot.com/o/images%2Fdefault-avatar.png?alt=media&token=39879684-36ae-4531-af35-123443fb0e72",alt:""}),c.a.createElement(z.a,{className:"text-primary mt-3"},c.a.createElement("h1",null,null===e||void 0===e?void 0:e.name)),c.a.createElement(J.a,null,c.a.createElement("h3",null,c.a.createElement(M.b,{className:"mr-2"}),null===e||void 0===e?void 0:e.phoneNumber)),c.a.createElement("a",{className:"btn btn-primary btn-block",target:"_blank",href:"mailto:{contact?.email}"},c.a.createElement(M.a,{className:"icon mr-2"}),null===e||void 0===e?void 0:e.email))))))},V=function(){var e=Object(n.useContext)(C),t=e.state,a=e.dispatch,r=(t.contacts,Object(n.useState)("")),l=Object(i.a)(r,2),o=l[0],p=l[1],d=Object(n.useState)(!1),f=Object(i.a)(d,2),E=f[0],O=f[1],w=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{y.a.database().ref("contacts").orderByChild("phoneNumber").equalTo(o).on("value",(function(e){null===e.val()?Object(b.b)("Contact Not Found",{type:"warning"}):(a({type:"SET_SEARCH_RESULT",payload:e.val()}),Object(b.b)("Populating Results",{type:"warning"})),O(!1)}))}catch(t){console.error(t),Object(b.b)("Something Wrong",{type:"error"})}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(u.a,{fluid:!0,className:""},c.a.createElement(h.a,null,c.a.createElement(g.a,{md:"6",className:"card offset-md-3"},c.a.createElement(v.a,{onSubmit:function(e){e.preventDefault(),o?(O(!0),w()):Object(b.b)("Please Enter Search Term To Proceed",{type:"warning"})}},c.a.createElement(N.a,{type:"text",name:"searchKey",id:"name",placeholder:"Search",value:o,onChange:function(e){return p(e.target.value)},style:{width:"80%",display:"unset"}}),c.a.createElement(x.a,{color:"primary",type:"submit",className:"text-uppercase",style:{float:"right"}},"Search")))),E?c.a.createElement(j.a,{type:"grow",color:"primary"}):c.a.createElement(L,null))},Y=function(){return c.a.createElement("div",null,c.a.createElement("h1",null,"404 page not found"))},Q=a(21),Z=function(e,t){switch(t.type){case"SET_CONTACT":return null==t.payload?Object(Q.a)({},e,{contacts:[]}):Object(Q.a)({},e,{contacts:t.payload});case"SET_LOADING":return Object(Q.a)({},e,{isLoading:t.payload});case"CONTACT_TO_UPDATE":return Object(Q.a)({},e,{contactToUpdate:t.payload,contactToUpdateKey:t.key});case"SET_SINGLE_CONTACT":case"SET_SEARCH_RESULT":return Object(Q.a)({},e,{contacts:t.payload});default:return e}};y.a.initializeApp({apiKey:"AIzaSyD1D_ESdSN1ZBVYeg1luzKF4IW81jmYn1I",authDomain:"dedairy-b4d2b.firebaseapp.com",databaseURL:"https://dedairy-b4d2b.firebaseio.com",projectId:"dedairy-b4d2b",storageBucket:"dedairy-b4d2b.appspot.com",messagingSenderId:"128765315624",appId:"1:128765315624:web:0de6a5fe696add822ec31d",measurementId:"G-15MLVHWNQJ"});var $={contacts:[],contact:{},contactToUpdate:null,contactToUpdateKey:null,isLoading:!1},X=function(){var e=Object(n.useReducer)(Z,$),t=Object(i.a)(e,2),a=t[0],r=t[1],l=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"SET_LOADING",payload:!0}),e.next=3,y.a.database().ref("/contacts");case 3:e.sent.on("value",(function(e){r({type:"SET_CONTACT",payload:e.val()}),r({type:"SET_LOADING",payload:!1})}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){l()}),[]),c.a.createElement(p.a,null,c.a.createElement(C.Provider,{value:{state:a,dispatch:r}},c.a.createElement(b.a,null),c.a.createElement(F,null),c.a.createElement(u.a,null,c.a.createElement(d.c,null,c.a.createElement(d.a,{exact:!0,path:"/contact/add",component:A}),c.a.createElement(d.a,{exact:!0,path:"/contact/view",component:q}),c.a.createElement(d.a,{exact:!0,path:"/contact/search",component:V}),c.a.createElement(d.a,{exact:!0,path:"/",component:L}),c.a.createElement(d.a,{exact:!0,path:"*",component:Y}))),c.a.createElement(G,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},57:function(e,t,a){e.exports=a(155)},62:function(e,t,a){},66:function(e,t,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.4c3ea8ee.chunk.js.map